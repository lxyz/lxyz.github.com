<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
 <title>HanHor的笔记</title>
 <link href="http://blog.hanhor.com/atom.xml" rel="self"/>
 <link href="http://www.hanhor.com/"/>
 <updated>2012-07-16T11:19:09+08:00</updated>
 <id>http://blog.hanhor.com/</id>
 <author>
   <name>HanHor Wu</name>
   <email>hanhor.wu#gmail.com</email>
 </author>

 
 <entry>
   <title>gentoo编译mysql</title>
   <link href="http://blog.hanhor.com/2012/07/compile-mysql-on-gentoo.html"/>
   <updated>2012-07-16T00:00:00+08:00</updated>
   <id>http://blog.hanhor.com/2012/07/compile-mysql-on-gentoo</id>
   <content type="html">&lt;p&gt;gentoo 编译nginx参见:&lt;a href=&quot;http://blog.hanhor.com/2012/07/compile-nginx-on-gentoo.html&quot;&gt;gentoo编译nginx&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1.下载mysql源码:&lt;/p&gt;

&lt;p&gt;我下载的是mysql-5.5.25a&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;wget http://cdn.mysql.com/Downloads/MySQL-5.5/mysql-5.5.25a.tar.gz
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;2.创建mysql用户:&lt;/p&gt;

&lt;p&gt;我创建mysql的用户名是mysql,用户组是mysql,命令如下:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;groupadd mysql
useradd -g mysql -s /sbin/nologin -M mysql
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;3.安装cmake&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;emerge cmake
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;4.编译mysql:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;tar mysql-5.5.25a.tar.gz
cd mysql-5.5.25a
cmake . \
-DCMAKE_INSTALL_PREFIX=/opt/mysql \
-DINSTALL_DATADIR=/opt/mysql/data \
-DSYSCONFDIR=/opt/mysql/etc \
-DWITH_MYISAM_STORAGE_ENGINE=1 \
-DWITH_INNOBASE_STORAGE_ENGINE=1 \
-DWITH_ARCHIVE_STORAGE_ENGINE=1 \
-DWITH_BLACKHOLE_STORAGE_ENGINE=1 \
-DENABLED_LOCAL_INFILE=1 \
-DDEFAULT_CHARSET=utf8 \
-DDEFAULT_COLLATION=utf8_general_ci \
-DEXTRA_CHARSETS=all \
-DMYSQL_TCP_PORT=3306 \
-DMYSQL_UNIX_ADDR=/tmp/mysqld.sock \
-DMYSQL_USER=mysql \
-DWITH_DEBUG=0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;安装目录是/opt/mysql,没指定data目录则data目录为安装目录下的data文件夹.其他的参数可根据需要自己添加.关于cmake可以参考:&lt;a href=&quot;http://who0168.blog.51cto.com/253401/469898&quot;&gt;MySQL5.5编译工具configure向cmake过渡指南&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;接着:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;make
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;make时可以制定 -j参数,来提高编译的效率,参见&lt;a href=&quot;http://hi.baidu.com/qshen/blog/item/4a06a41ec9ad6c1440341773.html&quot;&gt;make(gmake,gnumake)的-j参数，优化多核、多线程的编译过程&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;make完成之后执行:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;make install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;5.配置mysql:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;cd /opt/mysql
cp support-files/my-medium.cnf /opt/mysql/etc/my.cnf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;安装初始数据库:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;script/mysql_install_db --user=mysql --basedir=/opt/mysql
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;注意,这里的mysql_install_db 在安装mysql目录下的script/目录中.&lt;/p&gt;

&lt;p&gt;执行完成之后会提示如下信息:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Installing MySQL system tables...
OK
Filling help tables...
OK

To start mysqld at boot time you have to copy
support-files/mysql.server to the right place for your system

PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !
To do so, start the server, then issue the following commands:

/opt/mysql/bin/mysqladmin -u root password 'new-password'
/opt/mysql/bin/mysqladmin -u root -h hhw-server password 'new-password'

Alternatively you can run:
/opt/mysql/bin/mysql_secure_installation

which will also give you the option of removing the test
databases and anonymous user created by default.  This is
strongly recommended for production servers.

See the manual for more instructions.

You can start the MySQL daemon with:
cd /opt/mysql ; /opt/mysql/bin/mysqld_safe &amp;amp;

You can test the MySQL daemon with mysql-test-run.pl
cd /opt/mysql/mysql-test ; perl mysql-test-run.pl

Please report any problems with the /opt/mysql/scripts/mysqlbug script!
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;按照上面输出的提示信息操作就好了.&lt;/p&gt;

&lt;p&gt;接着:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;cp support-files/mysql.server /etc/init.d/mysql
export PATH=/opt/mysql/bin:$PATH
rc-update add mysql default
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;现在启动mysql看看:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/etc/init.d/mysql start
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;发现安装已经完成了.&lt;/p&gt;

&lt;p&gt;参考 &lt;a href=&quot;http://blog.csdn.net/htttw/article/details/6802130&quot;&gt;Ubuntu 安装MySQL&lt;/a&gt; .&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>gentoo编译nginx</title>
   <link href="http://blog.hanhor.com/2012/07/compile-nginx-on-gentoo.html"/>
   <updated>2012-07-15T00:00:00+08:00</updated>
   <id>http://blog.hanhor.com/2012/07/compile-nginx-on-gentoo</id>
   <content type="html">&lt;p&gt;  今天搞了个gentoo玩玩.内存开销确实小啊.先在上面编译个nginx.步骤如下:&lt;/p&gt;

&lt;p&gt;1.下载nginx:&lt;/p&gt;

&lt;p&gt;我下载的是nginx 1.2.2 stable&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;wget http://nginx.org/download/nginx-1.2.2.tar.gz
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;2.创建nginx用户和组:&lt;/p&gt;

&lt;p&gt;我创建nginx的用户名是www,用户组是www,命令如下:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;groupadd www
useradd -g www -s /sbin/nologin -M www
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;3.编译nginx:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;tar zxvf nginx-1.2.2.tar.gz
cd nginx-1.2.2
./configure --user=www --group=www --prefix=/opt/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_realip_module --with-http_stub_status_module --with-http_gzip_static_module
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;安装目录是/opt/nginx,其他的模块可根据需要自己添加.具体可以参见&lt;a href=&quot;http://wiki.nginx.org/Modules&quot;&gt;nginx官方wiki&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;4.设置开机启动,环境变量等:&lt;/p&gt;

&lt;p&gt;将&lt;a href=&quot;https://github.com/HorX/gentoo_server&quot;&gt;nginx.init&lt;/a&gt;这个文件下载下来,copy到/etc/init.d/nginx&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;cp nginx.init /etc/init.d/nginx
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;然后执行:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;export PATH=/opt/nginx/sbin:$PATH
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;接着:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;rc-update add nginx default
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;现在启动nginx看看:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/etc/init.d/nginx start
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;如果提示错误:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/etc/init.d/nginx: line 22: /lib/lsb/init-functions: No such file or directory
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;将rc.status和init-functions&lt;a href=&quot;https://github.com/HorX/gentoo_server&quot;&gt;两个文件&lt;/a&gt;分别copy/etc/ 和/etc/lsb/目录(参考:&lt;a href=&quot;http://www.gentoo-wiki.info/Rivendell&quot;&gt;gentoo wiki&lt;/a&gt;):&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;cp rc.status /etc/rc.status
mkdir /lib/lsb/
cp init-functions /lib/lsb/init-functions
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;然后再启动nginx,就没什么问题了.&lt;/p&gt;

&lt;p&gt;接下来就是配置nginx,这个可以参考nginx官方的wiki.&lt;/p&gt;

&lt;p&gt;文中所涉及到的要下载的文件:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;nginx.init
rc.status
init-functions
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;见 &lt;a href=&quot;https://github.com/HorX/gentoo_server&quot;&gt;https://github.com/HorX/gentoo_server&lt;/a&gt; .&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>ADC 2012</title>
   <link href="http://blog.hanhor.com/2012/07/adc-2012.html"/>
   <updated>2012-07-08T00:00:00+08:00</updated>
   <id>http://blog.hanhor.com/2012/07/adc-2012</id>
   <content type="html">&lt;p&gt;这个周末去杭州参加了ADC 2012(阿里技术嘉年华2012),人好多,分享的东西很广、好多技术都是没听说过的.要慢慢的去了解、应用.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>ubuntu下安装Sun JDK 7</title>
   <link href="http://blog.hanhor.com/2012/07/install-sun-jdk7.html"/>
   <updated>2012-07-04T00:00:00+08:00</updated>
   <id>http://blog.hanhor.com/2012/07/install-sun-jdk7</id>
   <content type="html">&lt;p&gt; 1.去&lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/downloads/java-se-jdk-7-download-432154.html&quot;&gt;Oracle&lt;/a&gt;下载适合你系统版本都JDK7，我的是ubuntu server 64位的，我选择了Linux x64 - Compressed Binary。下载下来的文件是：jdk-7-linux-x64.tar.gz 。&lt;/p&gt;

&lt;p&gt; 2.解压文件&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo mkdir /usr/lib/sun-java-jdk
sudo tar zxvf jdk-7-linux-x64.tar.gz -C /usr/lib/sun-java-jdk
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;查看解压出来的文件：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ls /usr/lib/sun-java-jdk/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;可以看到加压出来的文件再文件夹&lt;code&gt;jdk1.7.0&lt;/code&gt;中。&lt;/p&gt;

&lt;p&gt; 3.设置环境变量&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;vim ~/.bashrc
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;在文件最后面加上:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;export JAVA_HOME=/usr/lib/sun-java-jdk/jdk1.7.0
export JRE_HOME=${JAVA_HOME}/jre  
export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib  
export PATH=${JAVA_HOME}/bin:$PATH 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;保存后执行:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;source ~/.bashrc
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;使修改立即生效。
这时候，若是系统之前没有安装其他版本的JDK的话，就安装完成了。执行&lt;code&gt;java -version&lt;/code&gt;就可以看到java的版本信息了。
若是系统之前带有或安装有其他版本的JDK，还要执行以下操作。&lt;/p&gt;

&lt;p&gt; 4.配置默认JDK版本&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo update-alternatives --install /usr/bin/java java /usr/lib/jvm/java-7-sun/bin/java 300
sudo update-alternatives --install /usr/bin/javac javac /usr/lib/jvm/java-7-sun/bin/javac 300
sudo update-alternatives --install /usr/bin/jar jar /usr/lib/jvm/java-7-sun/bin/jar 300
sudo update-alternatives --install /usr/bin/javah javah /usr/lib/jvm/java-7-sun/bin/javah 300
sudo update-alternatives --install /usr/bin/javap javap /usr/lib/jvm/java-7-sun/bin/javap 300
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;接下来选择默认的JAVA，执行：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo update-alternatives --config java
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;会列出系统中其他的java 版本，根据需要选择就可以了。&lt;/p&gt;

&lt;p&gt;至此，sun-java-jdk7安装完成。&lt;/p&gt;

&lt;p&gt;参考：&lt;a href=&quot;http://blog.csdn.net/yang_hui1986527/article/details/6677450&quot;&gt;Ubuntu 11.04 下安装配置 JDK 7&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>ubuntu安装Ruby on Rails</title>
   <link href="http://blog.hanhor.com/2012/07/install-ror-on-ubuntu.html"/>
   <updated>2012-07-03T00:00:00+08:00</updated>
   <id>http://blog.hanhor.com/2012/07/install-ror-on-ubuntu</id>
   <content type="html">&lt;p&gt; 1.安装yaml&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;wget http://pyyaml.org/download/libyaml/yaml-0.1.4.tar.gz
tar xzvf yaml-0.1.4.tar.gz
cd yaml-0.1.4
./configure --prefix=/usr/local
make
sudo make install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt; 2.安装ruby&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;./configure --prefix=/usr/local --enable-shared --disable-install-doc --with-opt-dir=/usr/local/lib
make
sudo make install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt; 3.安装zlib&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo apt-get install zlib1g-dev 
cd ruby-1.9.3-p0/ext/zlib$
sudo ruby extconf.rb 
sudo  make 
sudo make install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt; 4.在 ~/.gemrc或/etc/gemrc 文件中加上下面一行，之后通过gem安装的程序都不带ri/rdoc&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;gem: --no-ri --no-rdoc
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;或&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;install: --no-rdoc --no-ri 
update:  --no-rdoc --no-ri
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt; 6.换淘宝的源&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ gem sources --remove http://rubygems.org/
$ gem sources -a http://ruby.taobao.org/
$ gem sources -l
** CURRENT SOURCES ***

http://ruby.taobao.org
# 请确保只有 ruby.taobao.org
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt; 7.安装javascript runtime&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo apt-get install nodejs
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt; 8.安装openssl支持&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo apt-get install libssl-dev
cd /ruby-source-files/ext/openssl
sudo ruby extconf.rb
sudo  make
sudo make install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt; 9.增加mysql支持
首先要安装mysql，没有安装的话请先安装&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo apt-get install mysql-server
sudo apt-get install libmysql-ruby libmysqlclient-dev
sudo gem install mysql2  --no-ri --no-rdoc
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;这样基本就安装完成了。
新建一个支持mysql数据库项目demo:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;rails new demo -d mysql
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;也可以直接&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;rails new demo
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;完成之后再Gemfile文件中将默认的sqlite3改成mysql2，再执行&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;bundle
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;就可以了。&lt;/p&gt;

&lt;p&gt;参考&lt;a href=&quot;http://blog.csdn.net/htttw/article/details/7628093&quot;&gt;Ubuntu下搭建Ruby On Rails&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;补充：&lt;/p&gt;

&lt;p&gt; 1.安装nokogiri&lt;/p&gt;

&lt;p&gt;Nokogiri是一个高效的HTML/XML的解析器。安装方法如下:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo apt-get install libxslt-dev libxml2-dev
sudo gem install nokogiri
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt; 2.安装postgres&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo aptitude installi postgresql-9.1 postgresql-server-dev-9.1 libpq-dev
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;安装postgres图形化管理工具pgAdmin&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo aptitude install pgadmin3
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;安装postgres的gem&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo gem install do_postgres
&lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>读1000小时学会Rails</title>
   <link href="http://blog.hanhor.com/2012/07/learn-rails-in-1000-hours.html"/>
   <updated>2012-07-02T00:00:00+08:00</updated>
   <id>http://blog.hanhor.com/2012/07/learn-rails-in-1000-hours</id>
   <content type="html">&lt;p&gt;今天打开&lt;a href=&quot;http://www.ruby-china.org&quot;&gt;ruby-china&lt;/a&gt;时，发现了这个“1000小时学会rails”系列文章，作者是&lt;a href=&quot;http://ruby-china.org/users/Juanito&quot;&gt;Junito&lt;/a&gt;,发现写的通俗易懂，细节上面讲的很不错，对我这种初学者来说很合适，就把链接贴过来，好好研究学习。&lt;/p&gt;

&lt;p&gt;以下是该系列的目录：&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://ruby-china.org/topics/2799&quot;&gt;1000 个小时学会 Rails - 000 Rails 前世今生&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://ruby-china.org/topics/2814&quot;&gt;1000 个小时学会 Rails - 001 你的第一个 Rails 应用&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://ruby-china.org/topics/2832&quot;&gt;1000 个小时学会 Rails - 002 测试！测试！&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://ruby-china.org/topics/2848&quot;&gt;1000 个小时学会 Rails - 003 RSpec 行为驱动测试简&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://ruby-china.org/topics/3239&quot;&gt;1000 个小时学会 Rails - 004 神秘的 X 项目&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://ruby-china.org/topics/3313&quot;&gt;1000 个小时学会 Rails - 005 X 项目的静态页面&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;目前作者&lt;a href=&quot;http://ruby-china.org/users/Juanito&quot;&gt;Junito&lt;/a&gt;只写到这里，以后更新了这边目录再接着更新上去。&lt;/p&gt;

&lt;p&gt;Ruby学习资料:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://lrthw.github.com/&quot;&gt;Learn Ruby The Hard Way(笨方法學 Ruby)&lt;/a&gt;,作者&lt;a href=&quot;https://github.com/lrthw&quot;&gt;@lrthw &lt;/a&gt; .&lt;/p&gt;&lt;/blockquote&gt;
</content>
 </entry>
 
 <entry>
   <title>jekyll博客搭建完成</title>
   <link href="http://blog.hanhor.com/2012/07/build_jekyll_blog.html"/>
   <updated>2012-07-01T00:00:00+08:00</updated>
   <id>http://blog.hanhor.com/2012/07/build_jekyll_blog</id>
   <content type="html">&lt;p&gt;之前的博客数据都没了，今天用jekyll重新弄个，好好坚持下去。
看看效果怎么样啊..&lt;/p&gt;

&lt;p&gt;h3. 测试H3&lt;/p&gt;

&lt;h1&gt;hello&lt;/h1&gt;

&lt;h1&gt;world&lt;/h1&gt;

&lt;h1&gt;Hello World&lt;/h1&gt;
</content>
 </entry>
 
 
</feed>
